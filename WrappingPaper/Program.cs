using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WrappingPaper
{
    class Program
    {
        static void Main(string[] args)
        {
            var base64DataString = "M3gxMXgyNA0KMTN4NXgxOQ0KMXg5eDI3DQoyNHg4eDIxDQo2eDh4MTcNCjE5eDE4eDIyDQoxMHg5eDEyDQoxMngyeDUNCjI2eDZ4MTENCjl4MjN4MTUNCjEyeDh4MTcNCjEzeDI5eDEwDQoyOHgxOHg2DQoyMngyOHgyNg0KMXg1eDExDQoyOXgyNngxMg0KOHgyOHgyOQ0KMjd4NHgyMQ0KMTJ4N3gxNg0KN3g0eDIzDQoxNXgyNHg4DQoxNXgxNHgyDQoxMXg2eDI5DQoyOHgxOXg5DQoxMHgzeDENCjV4MjB4MTMNCjEweDI1eDENCjIyeDE3eDcNCjE2eDI5eDMNCjE4eDIyeDgNCjE4eDExeDE5DQoyMXgyNHgyMA0KNHg3eDE3DQoyMngyN3gxMg0KMXgyNng2DQo1eDI3eDI0DQoyOXgyMXgzDQoyNXgzMHgyDQoyMXgyNngyDQoxMHgyNHgyNw0KMTB4MTZ4MjgNCjE4eDE2eDIzDQo2eDV4MjYNCjE5eDEyeDIwDQo2eDI0eDI1DQoxMXgyMHg3DQo0eDh4NQ0KMngxM3gxMQ0KMTF4MTd4MQ0KMTN4MjR4Ng0KMjJ4Mjl4MTYNCjR4MjR4MjANCjEweDI1eDEwDQoxMngyOXgyMw0KMjN4Mjd4MTINCjExeDIxeDkNCjEzeDJ4Ng0KMTV4MzB4Mg0KOHgyNngyNA0KMjR4N3gzMA0KMjJ4MjJ4OA0KMjl4Mjd4OA0KMjh4MjN4MjcNCjEzeDE2eDE0DQo5eDI4eDIwDQoyMXg0eDMwDQoyMXgyMHgyMA0KMTF4MTd4MzANCjl4MTR4MjINCjIweDJ4Ng0KMTB4MTF4MTQNCjF4OHgyMw0KMjN4MTl4MTkNCjI2eDEweDEzDQoyMXgxMngxMg0KMjV4N3gyNA0KMXgyOHgxNw0KMjB4MjN4OQ0KMngyNHgyNw0KMjB4MjR4MjkNCjF4M3gxMA0KNXgyMHgxNA0KMjV4MjF4Mw0KMTV4NXgyMg0KMTR4MTd4MTkNCjI3eDN4MTgNCjI5eDIzeDE5DQoxNHgyMXgxOQ0KMjB4OHgzDQoyMngyN3gxMg0KMjR4MTV4MTgNCjl4MTB4MTkNCjI5eDI1eDI4DQoxNHgyMng2DQo0eDE5eDI4DQo0eDI0eDE0DQoxN3gxOXgxNw0KN3gxOXgyOQ0KMjh4OHgyNg0KN3gyMHgxNg0KMTF4MjZ4MjkNCjJ4MTh4Mw0KMTJ4N3gxOA0KMTF4MTV4MjENCjI0eDd4MjYNCjJ4MjJ4MjMNCjJ4MzB4NQ0KMXgxOXg4DQoxNXgyOXgxMA0KMTV4MjZ4MjINCjIweDE2eDE0DQoyNXgyOXgyMg0KM3gxM3gxOQ0KMXgxMngzMA0KM3gxNXgyNw0KMTl4OXgxMQ0KMzB4OHgyMQ0KMjZ4MTJ4MjANCjExeDE3eDE5DQoxN3gyNXgxDQoxOXgyNHgxMg0KMzB4NngyMA0KMTF4MTl4MTgNCjE4eDE1eDI5DQoxOHg4eDkNCjI1eDE1eDUNCjE1eDZ4MjYNCjEzeDI3eDE5DQoyM3gyNHgxMg0KM3gxNXgyOA0KMTd4MTB4MTANCjE1eDR4Nw0KMTV4Mjd4Nw0KMjF4OHgxMQ0KOXgxOHgyDQo3eDIweDIwDQoxN3gyM3gxMg0KMngxOXgxDQo3eDI2eDI2DQoxM3gyM3g4DQoxMHgzeDEyDQoxMXgxeDkNCjF4MTF4MTkNCjI1eDE0eDI2DQoxNngxMHgxNQ0KN3g2eDExDQo4eDF4MjcNCjIweDI4eDE3DQozeDI1eDkNCjMweDd4NQ0KMTd4MTd4NA0KMjN4MjV4MjcNCjIzeDh4NQ0KMTN4MTF4MQ0KMTV4MTB4MjENCjIyeDE2eDENCjEyeDE1eDI4DQoyN3gxOHgyNg0KMjV4MTh4NQ0KMjF4M3gyNw0KMTV4MjV4NQ0KMjl4Mjd4MTkNCjExeDEweDEyDQoyMngxNngyMQ0KMTF4OHgxOA0KNngxMHgyMw0KMjF4MjF4Mg0KMTN4Mjd4MjgNCjJ4NXgyMA0KMjN4MTZ4MjANCjF4MjF4Nw0KMjJ4MngxMw0KMTF4MTB4NA0KN3gzeDQNCjE5eDJ4NQ0KMjF4MTF4MQ0KN3gyN3gyNg0KMTJ4NHgyMw0KMTJ4M3gxNQ0KMjV4N3g0DQoyMHg3eDE1DQoxNng1eDExDQoxeDE4eDI2DQoxMXgyN3gxMA0KMTd4NngyNA0KMTl4MTN4MTYNCjZ4M3gxMQ0KNHgxOXgxOA0KMTZ4MTV4MTUNCjF4MTF4MTcNCjE5eDExeDI5DQoxOHgxOXgxDQoxeDI1eDcNCjh4MjJ4MTQNCjE1eDZ4MTkNCjV4MzB4MTgNCjMweDI0eDIyDQoxMXgxNngyDQoyMXgyOXgxOQ0KMjB4Mjl4MTENCjI3eDF4MTgNCjIweDV4MzANCjEyeDR4MjgNCjN4OXgzMA0KMjZ4MjB4MTUNCjE4eDI1eDE4DQoyMHgyOHgyOA0KMjF4NXgzDQoyMHgyMXgyNQ0KMTl4Mjd4MjINCjh4Mjd4OQ0KMXg1eDE1DQozMHg2eDE5DQoxNng1eDE1DQoxOHgzMHgyMQ0KNHgxNXg4DQo5eDN4MjgNCjE4eDE1eDI3DQoyNXgxMXg2DQoxN3gyMngxNQ0KMTh4MTJ4MTgNCjE0eDMweDMwDQoxeDd4MjMNCjI3eDIxeDEyDQoxNXg3eDE4DQoxNngxN3gyNA0KMTF4MTJ4MTkNCjE4eDE1eDIxDQo2eDE4eDE1DQoyeDIxeDQNCjEyeDl4MTQNCjE5eDd4MjUNCjIyeDN4MQ0KMjl4MTl4Nw0KMzB4MjV4Nw0KNngyN3gyNw0KNXgxM3g5DQoyMXg0eDE4DQoxM3gxeDE2DQoxMXgyMXgyNQ0KMjd4MjB4MjcNCjE0eDI1eDkNCjIzeDExeDE1DQoyMngxMHgyNg0KMTV4MTZ4NA0KMTR4MTZ4MjENCjF4MXgyNA0KMTd4Mjd4Mw0KMjV4Mjh4MTYNCjEyeDJ4MjkNCjl4MTl4MjgNCjEyeDd4MTcNCjZ4OXgxOQ0KMTV4MTR4MjQNCjI1eDIxeDIzDQoyNngyN3gyNQ0KN3gxOHgxMw0KMTV4MTB4Ng0KMjJ4Mjh4Mg0KMTV4MngxNA0KM3gyNHgxOA0KMzB4MjJ4Nw0KMTh4Mjd4MTcNCjI5eDE4eDcNCjIweDJ4NA0KNHgyMHgyNg0KMjN4MzB4MTUNCjV4N3gzDQo0eDI0eDEyDQoyNHgzMHgyMA0KMjZ4MTh4MTcNCjZ4Mjh4Mw0KMjl4MTl4MjkNCjE0eDEweDQNCjE1eDV4MjMNCjEyeDI1eDQNCjd4MTV4MTkNCjI2eDIxeDE5DQoxOHgyeDIzDQoxOXgyMHgzDQozeDEzeDkNCjI5eDIxeDI0DQoyNngxM3gyOQ0KMzB4Mjd4NA0KMjB4MTB4MjkNCjIxeDE4eDgNCjd4MjZ4MTANCjI5eDE2eDIxDQoyMng1eDExDQoxN3gxNXgyDQo3eDI5eDUNCjZ4MTh4MTUNCjIzeDZ4MTQNCjEweDMweDE0DQoyNng2eDE2DQoyNHgxM3gyNQ0KMTd4Mjl4MjANCjR4Mjd4MTkNCjI4eDEyeDExDQoyM3gyMHgzDQoyMng2eDIwDQoyOXg5eDE5DQoxMHgxNngyMg0KMzB4MjZ4NA0KMjl4MjZ4MTENCjJ4MTF4MTUNCjF4M3gzMA0KMzB4MzB4MjkNCjl4MXgzDQozMHgxM3gxNg0KMjB4NHg1DQoyM3gyOHgxMQ0KMjR4Mjd4MQ0KNHgyNXgxMA0KOXgzeDYNCjE0eDR4MTUNCjR4NXgyNQ0KMjd4MTR4MTMNCjIweDMweDMNCjI4eDE1eDI1DQo1eDE5eDINCjEweDI0eDI5DQoyOXgzMHgxOA0KMzB4MXgyNQ0KN3g3eDE1DQoxeDEzeDE2DQoyM3gxOHg0DQoxeDI4eDgNCjI0eDExeDgNCjIyeDI2eDE5DQozMHgzMHgxNA0KMng0eDEzDQoyN3gyMHgyNg0KMTZ4MjB4MTcNCjExeDEyeDEzDQoyOHgyeDE3DQoxNXgyNngxMw0KMjl4MTV4MjUNCjMweDI3eDkNCjJ4NngyNQ0KMTB4MjZ4MTkNCjE2eDh4MjMNCjEyeDE3eDE4DQoyNngxNHgyMg0KMTN4MTd4NA0KMjd4Mjd4MjkNCjE3eDEzeDIyDQo5eDh4Mw0KMjV4MTV4MjANCjE0eDEzeDE2DQo4eDd4MTMNCjEyeDR4MjENCjI3eDE2eDE1DQo2eDE0eDUNCjI4eDI5eDE3DQoyM3gxN3gyNQ0KMTB4Mjd4MjgNCjF4Mjh4MjENCjE4eDJ4MzANCjI1eDMweDE2DQoyNXgyMXg3DQoyeDN4NA0KOXg2eDEzDQoxOXg2eDEwDQoyOHgxN3g4DQoxM3gyNHgyOA0KMjR4MTJ4Nw0KNXgxOXg1DQoxOHgxMHgyNw0KMTZ4MXg2DQoxMngxNHgzMA0KMXgyeDI4DQoyM3gyMXgyDQoxM3gzeDIzDQo5eDIyeDEwDQoxMHgxN3gyDQoyNHgyMHgxMQ0KMzB4NngxNA0KMjh4MXgxNg0KMjR4MjB4MQ0KMjh4N3g3DQoxeDI0eDIxDQoxNHg5eDcNCjIyeDh4MTUNCjIweDF4MjENCjZ4M3g3DQo3eDI2eDE0DQo1eDd4MjgNCjV4NHg0DQoxNXg3eDI4DQozMHgxNngyMw0KN3gyNngyDQoxeDJ4MzANCjI0eDI4eDIwDQo1eDE3eDI4DQo0eDE1eDIwDQoxNXgyNngyDQoxeDN4MjMNCjIyeDMweDI0DQo5eDIweDE2DQo3eDE1eDINCjZ4MjF4MTgNCjIxeDIxeDI5DQoyOXgxMHgxMA0KNHgzeDIzDQoyM3gyeDE4DQoyOXgyNHgxNA0KMjl4Mjl4MTYNCjIyeDI4eDI0DQoyMXgxOHgyNA0KMTZ4MjF4Ng0KM3g5eDIyDQo5eDE4eDQNCjIyeDl4OQ0KMTJ4OXgxMw0KMTh4MjF4MTQNCjd4OHgyOQ0KMjh4Mjh4MTQNCjF4NngyNA0KMTF4MTF4Mw0KOHgyOHg2DQoxMXgxNngxMA0KOXgxNngxNg0KNng2eDE5DQoyMXg1eDEyDQoxNXgxN3gxMg0KM3g2eDI5DQoxOXgxeDI2DQoxMHgzMHgyNQ0KMjR4MjZ4MjENCjF4MTB4MTgNCjZ4MXgxNg0KNHgxN3gyNw0KMTd4MTF4MjcNCjE1eDE1eDIxDQoxNHgyM3gxDQo4eDl4MzANCjIyeDIyeDI1DQoyMHgyN3gyMg0KMTJ4N3g5DQo5eDI2eDE5DQoyNngyNXgxMg0KOHg4eDE2DQoyOHgxNXgxMA0KMjl4MTh4Mg0KMjV4MjJ4Ng0KNHg2eDE1DQoxMngxOHg0DQoxMHgzeDIwDQoxN3gyOHgxNw0KMTR4MjV4MTMNCjE0eDEweDMNCjE0eDV4MTANCjd4N3gyMg0KMjF4MngxNA0KMXgyMXg1DQoyN3gyOXgxDQo2eDIweDQNCjd4MTl4MjMNCjI4eDE5eDI3DQozeDl4MTgNCjEzeDE3eDE3DQoxOHg4eDE1DQoyNngyM3gxNw0KMTB4MTB4MTMNCjExeDV4MjENCjI1eDE1eDI5DQo2eDIzeDI0DQoxMHg3eDINCjE5eDEweDMwDQo0eDN4MjMNCjIyeDEyeDYNCjExeDE3eDE2DQo2eDh4MTINCjE4eDIweDExDQo2eDJ4Mg0KMTd4NHgxMQ0KMjB4MjN4MjINCjI5eDIzeDI0DQoyNXgxMXgyMQ0KMjJ4MTF4MTUNCjI5eDN4OQ0KMTN4MzB4NQ0KMTd4MTB4MTINCjEweDMweDgNCjIxeDE2eDE3DQoxeDV4MjYNCjIyeDE1eDE2DQoyN3g3eDExDQoxNng4eDE4DQoyOXg5eDcNCjI1eDR4MTcNCjEweDIxeDI1DQoyeDE5eDIxDQoyOXgxMXgxNg0KMTh4MjZ4MjENCjJ4OHgyMA0KMTd4Mjl4MjcNCjI1eDI3eDQNCjE0eDN4MTQNCjI1eDI5eDI5DQoyNngxOHgxMQ0KOHgyNHgyOA0KN3gzMHgyNA0KMTJ4MzB4MjINCjI5eDIweDYNCjN4MTd4MQ0KNngxNXgxNA0KNngyMngyMA0KMTN4MjZ4MjYNCjEyeDJ4MQ0KN3gxNHgxMg0KMTV4MTZ4MTENCjN4MjF4NA0KMzB4MTd4MjkNCjl4MTh4MjcNCjExeDI4eDE2DQoyMngzeDI1DQoxOHgxNXgxNQ0KMngzMHgxMg0KM3gyN3gyMg0KMTB4OHg4DQoyNngxNngxNA0KMTV4MngyOQ0KMTJ4MTB4Nw0KMjF4MjB4MTUNCjJ4MTV4MjUNCjR4MTR4MTMNCjN4MTV4MTMNCjI5eDh4Mw0KN3g3eDI4DQoxNXgxMHgyNA0KMjN4MTV4NQ0KNXg3eDE0DQoyNHgxeDIyDQoxeDExeDEzDQoyNng0eDE5DQoxOXgxNngyNg0KNXgyNXg1DQoxN3gyNXgxNA0KMjN4N3gxNA0KMjR4NngxNw0KNXgxM3gxMg0KMjB4MjB4NQ0KMjJ4Mjl4MTcNCjExeDE3eDI5DQoyNXg2eDQNCjI5eDh4MTYNCjI4eDIyeDI0DQoyNHgyM3gxNw0KMTZ4MTd4NA0KMTd4OHgyNQ0KMjJ4OXgxMw0KMjR4NHg4DQoxOHgxMHgyMA0KMjF4MjN4MjENCjEzeDE0eDEyDQoyM3gyNng0DQo0eDEweDI5DQoyeDE4eDE4DQoxOXg1eDIxDQoyeDI3eDIzDQo2eDI5eDMwDQoyMXg5eDIwDQo2eDV4MTYNCjI1eDEweDI3DQo1eDI5eDIxDQoyNHgxNHgxOQ0KMTl4MTF4OA0KMngyOHg2DQoxOXgyNXg2DQoyN3gxeDExDQo2eDh4MjkNCjE4eDI1eDMwDQo0eDI3eDI2DQo4eDEyeDENCjd4MTd4MjUNCjd4MTR4MjcNCjEyeDl4NQ0KMTR4Mjl4MTMNCjE4eDE3eDUNCjIzeDF4Mw0KMjh4NXgxMw0KM3gyeDI2DQozeDd4MTENCjF4OHg3DQoxMng1eDQNCjJ4MzB4MjENCjE2eDMweDExDQozeDI2eDQNCjE2eDl4NA0KMTF4OXgyMg0KMjN4NXg2DQoxM3gyMHgzDQo0eDN4Mg0KMTR4MTB4MjkNCjExeDh4MTINCjI2eDE1eDE2DQo3eDE3eDI5DQoxOHgxOXgxOA0KOHgyOHg0DQoyMng2eDEzDQo5eDIzeDcNCjExeDIzeDIwDQoxM3gxMXgyNg0KMTV4MzB4MTMNCjF4NXg4DQo1eDEweDI0DQoyMngyNXgxNw0KMjd4MjB4MjUNCjMweDEweDIxDQoxNngyOHgyNA0KMjB4MTJ4OA0KMTd4MjV4MQ0KMzB4MTR4OQ0KMTR4MTh4Ng0KOHgyOHgyOQ0KMTJ4MTh4MjkNCjl4N3gxOA0KNngxMngyNQ0KMjB4MTN4MjQNCjIyeDN4MTINCjV4MjN4MjINCjh4MTB4MTcNCjd4MjN4NQ0KMTB4MjZ4MjcNCjE0eDI2eDE5DQoxMHgxOHgyNA0KOHg0eDQNCjE2eDE1eDExDQozeDE0eDkNCjE4eDV4MzANCjI5eDEyeDI2DQoxNngxM3gxMg0KMTV4MTB4Nw0KMTh4NXgyNg0KMTR4MXg2DQoxMHg4eDI5DQozeDR4OQ0KMTl4NHgyMw0KMjh4MTd4MjMNCjMweDd4MTcNCjE5eDV4OQ0KMjZ4Mjl4MjgNCjIyeDEzeDE3DQoyOHgyeDENCjIweDMweDgNCjE1eDEzeDIxDQoyNXgyM3gxOQ0KMjd4MjN4MQ0KNHg2eDIzDQoyOXgyOXgyNA0KNXgxOHg3DQo0eDZ4MzANCjE3eDE1eDINCjI3eDR4Mg0KMjV4MjR4MTQNCjI4eDh4MzANCjI0eDI5eDUNCjE0eDMweDE0DQoxMHgxOHgxOQ0KMTV4MjZ4MjINCjI0eDE5eDIxDQoyOXgyM3gyNw0KMjF4MTB4MTYNCjd4NHgyOQ0KMTR4MjF4Mw0KMjF4NHgyOA0KMTd4MTZ4MTUNCjI0eDd4MTMNCjIxeDI0eDE1DQoyNXgxMXgxNg0KMTB4MjZ4MTMNCjIzeDIweDE0DQoyMHgyOXgyNw0KMTR4MjR4MTQNCjE0eDIzeDEyDQoxOHg2eDUNCjN4MTh4OQ0KOHgxOHgxOQ0KMjB4MjZ4MTUNCjE2eDE0eDEzDQozMHgxNngzDQoxN3gxM3g0DQoxNXgxOXgzMA0KMjB4M3g4DQoxM3g0eDUNCjEyeDEweDE1DQo4eDIzeDI2DQoxNng4eDE1DQoyMng4eDExDQoxMngxMXgxOA0KMjh4M3gzMA0KMTV4OHg0DQoxM3gyMngxMw0KMjF4MjZ4MjENCjI5eDF4MTUNCjI4eDl4NQ0KMjd4M3gyNg0KMjJ4MTl4MzANCjR4MTF4MjINCjIxeDI3eDIwDQoyMngyNng3DQoxOXgyOHgyMA0KMjR4MjN4MTYNCjI2eDEyeDkNCjEzeDIyeDkNCjV4NngyMw0KMjB4N3gyDQoxOHgyNngzMA0KM3g2eDI4DQoyNHgxOHgxMw0KMjh4MTl4MTYNCjI1eDIxeDI1DQoyNXgxOXgyMw0KMjJ4Mjl4MTANCjI5eDE5eDMwDQo0eDd4MjcNCjV4MTJ4MjgNCjh4MjZ4Ng0KMTR4MTR4MjUNCjE3eDE3eDINCjV4Mjd4MTENCjh4MngyDQozeDIweDI0DQoyNngxMHg5DQoyMngyOHgyNw0KMTh4MTV4MjANCjEyeDExeDENCjV4MTR4MzANCjd4M3gxNg0KMngxNngxNg0KMTh4MjB4MTUNCjEzeDE0eDI5DQoxeDE3eDEyDQoxM3g1eDIzDQoxOXg0eDEwDQoyNXgxOXgxMQ0KMTV4MTd4MTQNCjF4Mjh4MjcNCjExeDl4MjgNCjl4MTB4MTgNCjMweDExeDIyDQoyMXgyMXgyMA0KMngxeDUNCjJ4MjV4MQ0KN3gzeDQNCjIyeDE1eDI5DQoyMXgyOHgxNQ0KMTJ4MTJ4NA0KMjF4MzB4Ng0KMTV4MTB4Nw0KMTB4MTR4Ng0KMjF4MjZ4MTgNCjE0eDI1eDYNCjl4N3gxMQ0KMjJ4M3gxDQoxeDE2eDI3DQoxeDE0eDIzDQoyeDEzeDgNCjE0eDE5eDExDQoyMXgyNngxDQo0eDI4eDEzDQoxMngxNngyMA0KMjF4MTN4OQ0KM3g0eDEzDQoxNHg5eDgNCjIxeDIxeDEyDQoyN3gxMHgxNw0KNngyMHg2DQoyOHgyM3gyMw0KMngyOHgxMg0KOHgxMHgxMA0KM3g5eDINCjIweDN4MjkNCjE5eDR4MTYNCjI5eDI0eDkNCjI2eDIweDgNCjE1eDI4eDI2DQoxOHgxN3gxMA0KN3gyMngxMA0KMjB4MTV4OQ0KNngxMHg4DQo3eDI2eDIxDQo4eDh4MTYNCjE1eDZ4MjkNCjIyeDMweDExDQoxOHgyNXg4DQo2eDIxeDIwDQo3eDIzeDI1DQo4eDI1eDI2DQoxMXgyNXgyNw0KMjJ4MTh4MjMNCjN4MngxNA0KMTZ4MTZ4MQ0KMTV4MTN4MTENCjN4OXgyNQ0KMjl4MjV4MjQNCjl4MTV4MQ0KMTJ4NHgxDQoyM3gzMHgyMA0KM3gxeDIzDQo2eDEweDI5DQoyOHgxM3gyNA0KNHgxOXgxNw0KNng2eDI1DQoyN3gyOXgxNw0KMTJ4MTN4Mg0KMTB4N3gxMw0KMTR4MTV4OA0KMjJ4MngzDQoyN3gxN3gxOQ0KMjN4MTB4MTYNCjV4OXgyNQ0KOXgyNXgxNA0KMTF4MTh4Ng0KMTh4MTB4MTINCjl4NHgxNQ0KN3gxNngxNA0KMTd4MjR4MTANCjExeDR4Ng0KMTJ4OXgxNw0KMjJ4MTh4MTINCjZ4MjR4MjQNCjZ4MjJ4MjMNCjV4MTd4MzANCjZ4OXg1DQoxN3gyMHgxMA0KNng4eDEyDQoxNHgxN3gxMw0KMjl4MTB4MTcNCjIyeDR4NQ0KMTB4MTl4MzANCjIyeDI5eDExDQoxMHgxMngyOQ0KMjF4MjJ4MjYNCjE2eDZ4MjUNCjF4MjZ4MjQNCjMweDE3eDE2DQoyN3gyOHg1DQozMHgxM3gyMg0KN3gyNngxMg0KMTF4MjR4MzANCjF4MTd4MjUNCjIyeDF4Mw0KMjl4MjR4Ng0KNHg4eDI0DQoxM3g5eDIwDQo4eDEyeDkNCjIxeDI1eDQNCjIzeDIzeDI4DQo1eDJ4MTkNCjI5eDN4MTUNCjIyeDF4MTQNCjN4MjN4MzANCjh4MjV4Mw0KMTV4OHgxNA0KMzB4MTR4Ng0KMjN4Mjd4MjQNCjE5eDF4Mg0KMTB4OXgxMw0KMTN4OHg3DQo4eDEzeDIyDQo1eDE1eDIwDQoxN3gxNHg4DQo1eDExeDIwDQo1eDEweDI3DQoyNHgxN3gxOQ0KMjF4MngzDQoxNXgzMHgyNg0KMjF4MTl4MTUNCjJ4N3gyMw0KMTN4MTd4MjUNCjMweDE1eDE5DQoyNng0eDEwDQoyeDI1eDgNCjl4OXgxMA0KMngyNXg4DQoxOXgyMXgzMA0KMTd4MjZ4MTINCjd4NXgxMA0KMngyMngxNA0KMTB4MTd4MzANCjF4OHg1DQoyM3gyeDI1DQoyMngyOXg4DQoxM3gyNngxDQoyNngzeDMwDQoyNXgxN3g4DQoyNXgxOHgyNg0KMjZ4MTl4MTUNCjh4Mjh4MTANCjEyeDE2eDI5DQozMHg2eDI5DQoyOHgxOXg0DQoyN3gyNngxOA0KMTV4MjN4MTcNCjV4MjF4MzANCjh4MTF4MTMNCjJ4MjZ4Nw0KMTl4OXgyNA0KM3gyMngyMw0KNng3eDE4DQo0eDI2eDMwDQoxM3gyNXgyMA0KMTd4M3gxNQ0KOHgyMHgxOA0KMjN4MTh4MjMNCjI4eDIzeDkNCjE2eDN4NA0KMXgyOXgxNA0KMjB4MjZ4MjINCjN4MngyMg0KMjN4OHgxNw0KMTl4NXgxNw0KMjF4MTh4MjANCjE3eDIxeDgNCjMweDI4eDENCjI5eDE5eDIzDQoxMngxMngxMQ0KMjR4MTh4Nw0KMjF4MTh4MTQNCjE0eDI2eDI1DQo5eDExeDMNCjEweDd4MTUNCjI3eDZ4MjgNCjE0eDI2eDQNCjI4eDR4MQ0KMjJ4MjV4MjkNCjZ4MjZ4Ng0KMXgzeDEzDQoyNngyMngxMg0KNngyMXgyNg0KMjN4NHgyNw0KMjZ4MTN4MjQNCjV4MjR4MjgNCjIyeDE2eDcNCjN4Mjd4MjQNCjE5eDI4eDINCjExeDEzeDkNCjI5eDE2eDIyDQozMHgxMHgyNA0KMTR4MTR4MjINCjIyeDIzeDE2DQoxNHg4eDMNCjIweDV4MTQNCjI4eDZ4MTMNCjN4MTV4MjUNCjR4MTJ4MjINCjE1eDEyeDI1DQoxMHgxMXgyNA0KN3g3eDYNCjh4MTF4OQ0KMjF4MTB4MjkNCjIzeDI4eDMwDQo4eDI5eDI2DQoxNngyN3gxMQ0KMXgxMHgyDQoyNHgyMHgxNg0KN3gxMngyOA0KMjh4OHgyMA0KMTR4MTB4MzANCjF4MTl4Ng0KNHgxMngyMA0KMTh4Mng3DQoyNHgxOHgxNw0KMTZ4MTF4MTANCjF4MTJ4MjINCjMweDE2eDI4DQoxOHgxMngxMQ0KMjh4OXg4DQoyM3g2eDE3DQoxMHgzeDExDQo1eDEyeDgNCjIyeDJ4MjMNCjl4MTl4MTQNCjE1eDI4eDEzDQoyN3gyMHgyMw0KMTl4MTZ4MTINCjE5eDMweDE1DQo4eDE3eDQNCjEweDIyeDE4DQoxM3gyMng0DQozeDEyeDE5DQoyMngxNngyMw0KMTF4OHgxOQ0KOHgxMXg2DQo3eDE0eDcNCjI5eDE3eDI5DQoyMXg4eDEyDQoyMXg5eDExDQoyMHgxeDI3DQoxeDIyeDExDQo1eDI4eDQNCjI2eDd4MjYNCjMweDEyeDE4DQoyOXgxMXgyMA0KM3gxMngxNQ0KMjR4MjV4MTcNCjE0eDZ4MTE=";
            var dataString = Encoding.UTF8.GetString(Convert.FromBase64String(base64DataString));

            var formatter = new DataFormatter(dataString);
            var presents = formatter.CreatePresents();

            var neededSqFt = 0;

            foreach (var present in presents)
            {
                neededSqFt += present.CalculateNeededWrappingPaper();
            }

            Console.Write("The elves need {0:##,###} sq ft of wrapping paper.", neededSqFt);
            Console.ReadLine();
        }
    }

    public class DataFormatter
    {
        private string _dataString;

        public DataFormatter(string dataString)
        {
            _dataString = dataString;
        }

        public IEnumerable<PresentBox> CreatePresents()
        {
            var presents = _dataString
                .Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None)
                .Select(rec =>
                    {
                        var h = 0;
                        var l = 0;
                        var w = 0;
                        var dimensions = rec.Split('x');

                        if (int.TryParse(dimensions[0], out h)
                            && int.TryParse(dimensions[1], out l)
                            && int.TryParse(dimensions[2], out w))
                        {
                            return new PresentBox(h, l, w);
                        }

                        return new NoBox();
                    });

            return presents;
        } 
    }

    public class PresentBox
    {
        public int Height { get; }
        public int Length { get; }
        public int Width { get; }

        public PresentBox(int height, int length, int width)
        {
            Height = height;
            Length = length;
            Width = width;
        }

        public virtual int CalculateNeededWrappingPaper()
        {
            var side1SqFt = (2 * Height * Length);
            var side2SqFt = (2 * Length * Width);
            var side3SqFt = (2 * Height * Width);

            var sidesSqFt = new List<int> { side1SqFt, side2SqFt, side3SqFt };
            var extraSqFt = sidesSqFt.Min();

            var neededSqFt = (side1SqFt + side2SqFt + side3SqFt + extraSqFt);

            return neededSqFt;
        }
    }

    public class NoBox : PresentBox
    {
        public NoBox()
            : base(0, 0, 0)
        {
        }

        public override int CalculateNeededWrappingPaper()
        {
            return 0;
        }
    }
}
